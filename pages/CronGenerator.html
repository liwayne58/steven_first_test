<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cron Expression Generator & Explainer - Quartz | SDS Site</title>
    <meta name="description" content="å¼·å¤§çš„ Quartz Cron è¡¨é”å¼ç”Ÿæˆå™¨èˆ‡è§£æå™¨ï¼Œæ”¯æ´å¯è¦–åŒ–è¨­å®šã€å³æ™‚é è¦½åŸ·è¡Œæ™‚é–“ã€è‡ªå‹•ç”Ÿæˆå’Œè©³ç´°è§£é‡‹ï¼Œé©ç”¨æ–¼ Java Quartz Schedulerã€‚">
    <meta name="keywords" content="Cron Generator, Quartz Cron, Cron Expression, æ’ç¨‹å·¥å…·, Java Quartz, ä»»å‹™èª¿åº¦, Cron Parser, å®šæ™‚ä»»å‹™, SDS Site">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://sds-site.vercel.app/CronGenerator">
    <meta property="og:title" content="Cron Expression Generator & Explainer - Quartz | SDS Site">
    <meta property="og:description" content="å°ˆæ¥­çš„ Quartz Cron è¡¨é”å¼ç”Ÿæˆå™¨ï¼Œæ”¯æ´å¯è¦–åŒ–è¨­å®šã€å³æ™‚é è¦½å’Œè©³ç´°è§£é‡‹ï¼Œå®Œç¾é©é… Java Quartz Schedulerã€‚">
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://sds-site.vercel.app/CronGenerator">
    <meta name="twitter:title" content="Cron Expression Generator & Explainer - Quartz">
    <meta name="twitter:description" content="å°ˆæ¥­çš„ Quartz Cron è¡¨é”å¼ç”Ÿæˆå™¨ï¼Œæ”¯æ´å¯è¦–åŒ–è¨­å®šã€å³æ™‚é è¦½å’Œè©³ç´°è§£é‡‹ã€‚">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <!-- CSS -->
    <link rel="stylesheet" href="styles.css">
    
    <style>
        /* Cron Generator å°ˆç”¨æ¨£å¼ */
        .cron-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            margin-bottom: 24px;
        }
        
        .cron-panel {
            background: var(--bg-primary);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md);
            overflow: hidden;
        }
        
        .panel-header {
            background: var(--bg-secondary);
            padding: 16px 20px;
            border-bottom: 1px solid var(--border-color);
            font-weight: 600;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .panel-content {
            padding: 20px;
        }
        
        .cron-expression {
            background: var(--bg-tertiary);
            border: 2px solid var(--border-color);
            border-radius: var(--radius-md);
            padding: 16px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 18px;
            font-weight: 600;
            text-align: center;
            color: var(--primary-color);
            margin-bottom: 16px;
            word-break: break-all;
            transition: all 0.3s ease;
        }
        
        .cron-expression.valid {
            border-color: var(--success-color);
            background: rgba(16, 185, 129, 0.05);
            color: var(--success-color);
        }
        
        .cron-expression.invalid {
            border-color: var(--error-color);
            background: rgba(239, 68, 68, 0.05);
            color: var(--error-color);
        }
        
        .field-group {
            margin-bottom: 20px;
        }
        
        .field-label {
            display: block;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .field-control {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-sm);
            font-size: 14px;
            transition: all 0.2s ease;
            background: var(--bg-primary);
            color: var(--text-primary);
        }
        
        .field-control:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        .field-description {
            font-size: 12px;
            color: var(--text-secondary);
            margin-top: 4px;
            line-height: 1.4;
        }
        
        .preset-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 8px;
            margin-bottom: 20px;
        }
        
        .preset-btn {
            padding: 8px 12px;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-sm);
            background: var(--bg-secondary);
            color: var(--text-primary);
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: center;
        }
        
        .preset-btn:hover {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        .explanation-section {
            margin-bottom: 20px;
        }
        
        .explanation-title {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .explanation-content {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            padding: 16px;
            font-size: 14px;
            line-height: 1.6;
            color: var(--text-primary);
        }
        
        .field-breakdown {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 12px;
            margin-bottom: 16px;
        }
        
        .field-item {
            text-align: center;
            padding: 12px 8px;
            background: var(--bg-tertiary);
            border-radius: var(--radius-sm);
            border: 1px solid var(--border-color);
        }
        
        .field-value {
            font-family: 'JetBrains Mono', monospace;
            font-weight: 600;
            font-size: 16px;
            color: var(--primary-color);
            margin-bottom: 4px;
        }
        
        .field-name {
            font-size: 11px;
            color: var(--text-secondary);
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .next-runs {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            padding: 16px;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .next-run-item {
            padding: 8px 12px;
            background: var(--bg-primary);
            border-radius: var(--radius-sm);
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 13px;
            border: 1px solid var(--border-color);
        }
        
        .next-run-item:last-child {
            margin-bottom: 0;
        }
        
        .run-time {
            font-family: 'JetBrains Mono', monospace;
            font-weight: 500;
            color: var(--primary-color);
        }
        
        .run-relative {
            color: var(--text-secondary);
            font-size: 12px;
        }
        
        .error-message {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid var(--error-color);
            border-radius: var(--radius-md);
            padding: 12px;
            color: var(--error-color);
            font-size: 13px;
            margin-top: 12px;
            display: none;
        }
        
        .syntax-help {
            background: rgba(59, 130, 246, 0.05);
            border: 1px solid rgba(59, 130, 246, 0.2);
            border-radius: var(--radius-md);
            padding: 16px;
            margin-top: 20px;
        }
        
        .syntax-help h4 {
            color: var(--primary-color);
            margin-bottom: 12px;
            font-size: 14px;
            font-weight: 600;
        }
        
        .syntax-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 12px;
        }
        
        .syntax-table th,
        .syntax-table td {
            padding: 8px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
            vertical-align: top;
        }
        
        .syntax-table th {
            background: var(--bg-secondary);
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .syntax-table td {
            font-family: 'JetBrains Mono', monospace;
            font-size: 11px;
        }
        
        .quick-actions {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
            flex-wrap: wrap;
        }
        
        .action-btn {
            padding: 8px 16px;
            border: none;
            border-radius: var(--radius-sm);
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .action-btn.primary {
            background: var(--primary-color);
            color: white;
        }
        
        .action-btn.primary:hover {
            background: var(--primary-hover);
        }
        
        .action-btn.secondary {
            background: var(--bg-secondary);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
        }
        
        .action-btn.secondary:hover {
            background: var(--bg-tertiary);
        }
        
        .manual-input {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
        }
        
        .manual-cron-input {
            flex: 1;
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-sm);
            font-family: 'JetBrains Mono', monospace;
            font-size: 14px;
            background: var(--bg-primary);
        }
        
        .manual-cron-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        @media (max-width: 768px) {
            .cron-container {
                grid-template-columns: 1fr;
                gap: 16px;
            }
            
            .field-breakdown {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .preset-buttons {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .quick-actions {
                flex-direction: column;
            }
            
            .manual-input {
                flex-direction: column;
            }
        }
        
        @media (max-width: 480px) {
            .field-breakdown {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
            }
            
            .preset-buttons {
                grid-template-columns: 1fr;
            }
            
            .cron-expression {
                font-size: 14px;
                padding: 12px;
            }
        }
        
        /* çˆ†ç±³èŠ±ç‰¹æ•ˆæ¨£å¼ */
        .popcorn-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            pointer-events: none;
            z-index: 9999;
            overflow: hidden;
        }
        
        .popcorn {
            position: absolute;
            font-size: 24px;
            user-select: none;
            animation: popcorn-fall linear forwards;
            opacity: 0;
        }
        
        @keyframes popcorn-fall {
            0% {
                opacity: 1;
                transform: translateY(-50px) translateX(0) rotate(0deg) scale(0.5);
            }
            10% {
                transform: translateY(0) translateX(var(--drift-10, 0px)) rotate(180deg) scale(1);
            }
            30% {
                transform: translateY(30vh) translateX(var(--drift-30, 0px)) rotate(360deg) scale(1.2);
            }
            60% {
                transform: translateY(60vh) translateX(var(--drift-60, 0px)) rotate(540deg) scale(1);
            }
            100% {
                opacity: 0;
                transform: translateY(100vh) translateX(var(--drift-100, 0px)) rotate(720deg) scale(0.8);
            }
        }
        
        .popcorn:nth-child(odd) {
            animation-duration: 3s;
        }
        
        .popcorn:nth-child(even) {
            animation-duration: 3.5s;
        }
        
        .popcorn:nth-child(3n) {
            animation-duration: 2.5s;
        }
        
        .popcorn:nth-child(4n) {
            animation-duration: 4s;
        }
        
        /* è¤‡è£½æŒ‰éˆ•ç‰¹æ•ˆ */
        .copy-success-effect {
            position: relative;
            overflow: hidden;
        }
        
        .copy-success-effect::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: radial-gradient(circle, rgba(16, 185, 129, 0.3) 0%, transparent 70%);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            animation: copy-ripple 0.6s ease-out;
        }
        
        @keyframes copy-ripple {
            to {
                width: 300px;
                height: 300px;
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>Cron Expression Generator & Explainer</h1>
            <p>Quartz Scheduler å°ˆç”¨çš„ Cron è¡¨é”å¼ç”Ÿæˆå™¨èˆ‡è§£æå·¥å…·</p>
        </header>

        <!-- Main Content -->
        <main class="main-card">
            <!-- Toolbar -->
            <div class="toolbar">
                <div class="quick-actions">
                    <!-- <button class="action-btn primary" onclick="generateCron()">
                        âš¡ ç”Ÿæˆè¡¨é”å¼
                    </button> -->
                    <button class="action-btn primary" onclick="copyCronExpression()">
                        ğŸ“‹ è¤‡è£½è¡¨é”å¼
                    </button>
                    <button class="action-btn secondary" onclick="resetForm()">
                        ğŸ”„ é‡ç½®è¨­å®š
                    </button>
                </div>
                
                <div class="manual-input">
                    <input type="text" id="manualCronInput" class="manual-cron-input" 
                           placeholder="è¼¸å…¥ Cron è¡¨é”å¼é€²è¡Œè§£æ..." 
                           onkeyup="handleManualInput(event)">
                    <button class="action-btn primary" onclick="parseCronExpression()">
                        ğŸ” è§£æ
                    </button>
                </div>
            </div>

            <!-- Main Container -->
            <div class="cron-container">
                <!-- Generator Panel -->
                <div class="cron-panel">
                    <div class="panel-header">
                        <span>âš™ï¸</span>
                        Cron è¡¨é”å¼ç”Ÿæˆå™¨
                    </div>
                    <div class="panel-content">
                        <!-- Current Expression -->
                        <div class="cron-expression" id="cronExpression">
                            0 0 12 * * ?
                        </div>
                        
                        <!-- Preset Buttons -->
                        <div class="explanation-title">å¸¸ç”¨é è¨­</div>
                        <div class="preset-buttons">
                            <button class="preset-btn" onclick="setPreset('0 */5 * * * ?')">æ¯5åˆ†é˜</button>
                            <button class="preset-btn" onclick="setPreset('0 0 */1 * * ?')">æ¯å°æ™‚</button>
                            <button class="preset-btn" onclick="setPreset('0 0 12 * * ?')">æ¯æ—¥ä¸­åˆ</button>
                            <button class="preset-btn" onclick="setPreset('0 0 0 ? * MON')">æ¯é€±ä¸€</button>
                            <button class="preset-btn" onclick="setPreset('0 0 0 1 * ?')">æ¯æœˆ1è™Ÿ</button>
                            <button class="preset-btn" onclick="setPreset('0 0 0 1 1 ?')">æ¯å¹´1æœˆ1æ—¥</button>
                        </div>

                        <!-- Field Controls -->
                        <div class="field-group">
                            <label class="field-label">ç§’ (0-59)</label>
                            <input type="text" id="seconds" class="field-control" value="0" onchange="generateCron()">
                            <div class="field-description">å¯ä½¿ç”¨ * , - / ? ç‰¹æ®Šå­—ç¬¦</div>
                        </div>

                        <div class="field-group">
                            <label class="field-label">åˆ† (0-59)</label>
                            <input type="text" id="minutes" class="field-control" value="0" onchange="generateCron()">
                            <div class="field-description">å¯ä½¿ç”¨ * , - / ? ç‰¹æ®Šå­—ç¬¦</div>
                        </div>

                        <div class="field-group">
                            <label class="field-label">æ™‚ (0-23)</label>
                            <input type="text" id="hours" class="field-control" value="12" onchange="generateCron()">
                            <div class="field-description">24å°æ™‚åˆ¶ï¼Œå¯ä½¿ç”¨ * , - / ? ç‰¹æ®Šå­—ç¬¦</div>
                        </div>

                        <div class="field-group">
                            <label class="field-label">æ—¥ (1-31)</label>
                            <input type="text" id="dayOfMonth" class="field-control" value="*" onchange="generateCron()">
                            <div class="field-description">æœˆä»½ä¸­çš„æ—¥æœŸï¼Œèˆ‡æ˜ŸæœŸäº’æ–¥ä½¿ç”¨ ?</div>
                        </div>

                        <div class="field-group">
                            <label class="field-label">æœˆ (1-12 æˆ– JAN-DEC)</label>
                            <input type="text" id="month" class="field-control" value="*" onchange="generateCron()">
                            <div class="field-description">å¯ä½¿ç”¨æ•¸å­—æˆ–è‹±æ–‡ç¸®å¯«</div>
                        </div>

                        <div class="field-group">
                            <label class="field-label">æ˜ŸæœŸ (1-7 æˆ– SUN-SAT)</label>
                            <input type="text" id="dayOfWeek" class="field-control" value="?" onchange="generateCron()">
                            <div class="field-description">1=é€±æ—¥ï¼Œ2=é€±ä¸€...7=é€±å…­ï¼Œèˆ‡æ—¥æœŸäº’æ–¥ä½¿ç”¨ ?</div>
                        </div>

                        <div class="field-group">
                            <label class="field-label">å¹´ (1970-2099, å¯é¸)</label>
                            <input type="text" id="year" class="field-control" value="" onchange="generateCron()">
                            <div class="field-description">Quartz å°ˆç”¨ï¼Œå¯ç•™ç©º</div>
                        </div>
                    </div>
                </div>

                <!-- Explainer Panel -->
                <div class="cron-panel">
                    <div class="panel-header">
                        <span>ğŸ“Š</span>
                        è¡¨é”å¼è§£æèˆ‡é è¦½
                    </div>
                    <div class="panel-content">
                        <!-- Field Breakdown -->
                        <div class="explanation-title">æ¬„ä½åˆ†è§£</div>
                        <div class="field-breakdown">
                            <div class="field-item">
                                <div class="field-value" id="displaySeconds">0</div>
                                <div class="field-name">ç§’</div>
                            </div>
                            <div class="field-item">
                                <div class="field-value" id="displayMinutes">0</div>
                                <div class="field-name">åˆ†</div>
                            </div>
                            <div class="field-item">
                                <div class="field-value" id="displayHours">12</div>
                                <div class="field-name">æ™‚</div>
                            </div>
                            <div class="field-item">
                                <div class="field-value" id="displayDayOfMonth">*</div>
                                <div class="field-name">æ—¥</div>
                            </div>
                            <div class="field-item">
                                <div class="field-value" id="displayMonth">*</div>
                                <div class="field-name">æœˆ</div>
                            </div>
                            <div class="field-item">
                                <div class="field-value" id="displayDayOfWeek">?</div>
                                <div class="field-name">æ˜ŸæœŸ</div>
                            </div>
                            <div class="field-item">
                                <div class="field-value" id="displayYear">-</div>
                                <div class="field-name">å¹´</div>
                            </div>
                        </div>

                        <!-- Explanation -->
                        <div class="explanation-section">
                            <div class="explanation-title">
                                <span>ğŸ’­</span>
                                è¡¨é”å¼èªªæ˜
                            </div>
                            <div class="explanation-content" id="cronExplanation">
                                æ¯æ—¥ä¸­åˆ12é»åŸ·è¡Œ
                            </div>
                        </div>

                        <!-- Next Runs -->
                        <div class="explanation-section">
                            <div class="explanation-title">
                                <span>â°</span>
                                æ¥ä¸‹ä¾†çš„åŸ·è¡Œæ™‚é–“
                            </div>
                            <div class="next-runs" id="nextRuns">
                                <div class="next-run-item">
                                    <span class="run-time">è¨ˆç®—ä¸­...</span>
                                    <span class="run-relative"></span>
                                </div>
                            </div>
                        </div>

                        <!-- Error Message -->
                        <div class="error-message" id="errorMessage"></div>
                    </div>
                </div>
            </div>

            <!-- Syntax Help -->
            <div class="syntax-help">
                <h4>ğŸ“š Quartz Cron èªæ³•èªªæ˜</h4>
                <table class="syntax-table">
                    <thead>
                        <tr>
                            <th>ç‰¹æ®Šå­—ç¬¦</th>
                            <th>èªªæ˜</th>
                            <th>ç¤ºä¾‹</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>*</td>
                            <td>åŒ¹é…ä»»æ„å€¼</td>
                            <td>* è¡¨ç¤ºæ¯åˆ†é˜/å°æ™‚/æ—¥ç­‰</td>
                        </tr>
                        <tr>
                            <td>?</td>
                            <td>ä¸æŒ‡å®šå€¼ï¼ˆåƒ…ç”¨æ–¼æ—¥å’Œæ˜ŸæœŸï¼‰</td>
                            <td>æ—¥å’Œæ˜ŸæœŸå…¶ä¸­ä¸€å€‹å¿…é ˆä½¿ç”¨ ?</td>
                        </tr>
                        <tr>
                            <td>-</td>
                            <td>ç¯„åœ</td>
                            <td>10-12 è¡¨ç¤º 10,11,12</td>
                        </tr>
                        <tr>
                            <td>,</td>
                            <td>åˆ—èˆ‰å€¼</td>
                            <td>MON,WED,FRI è¡¨ç¤ºé€±ä¸€ã€ä¸‰ã€äº”</td>
                        </tr>
                        <tr>
                            <td>/</td>
                            <td>é–“éš”</td>
                            <td>*/5 è¡¨ç¤ºæ¯5å€‹å–®ä½</td>
                        </tr>
                        <tr>
                            <td>L</td>
                            <td>æœ€å¾Œï¼ˆæ—¥å’Œæ˜ŸæœŸï¼‰</td>
                            <td>L è¡¨ç¤ºæœˆæœ«ï¼Œ6L è¡¨ç¤ºæœ€å¾Œä¸€å€‹é€±äº”</td>
                        </tr>
                        <tr>
                            <td>W</td>
                            <td>å·¥ä½œæ—¥ï¼ˆåƒ…æ—¥æœŸï¼‰</td>
                            <td>15W è¡¨ç¤ºé›¢15è™Ÿæœ€è¿‘çš„å·¥ä½œæ—¥</td>
                        </tr>
                        <tr>
                            <td>#</td>
                            <td>ç¬¬å¹¾å€‹æ˜ŸæœŸï¼ˆåƒ…æ˜ŸæœŸï¼‰</td>
                            <td>6#3 è¡¨ç¤ºç¬¬3å€‹é€±äº”</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </main>

        <!-- Navigation -->
        <nav class="navigation" data-auto-navigation>
            <!-- å°èˆªå…§å®¹æœƒè‡ªå‹•è¼‰å…¥ -->
        </nav>

        <!-- Footer -->
        <!-- é è…³æœƒç”±å°èˆªçµ„ä»¶è‡ªå‹•æ·»åŠ  -->
    </div>

    <!-- Toast System -->
    <script src="util/Toast.js"></script>
    
    <!-- Cron Generator Script -->
    <script>
        /**
         * Quartz Cron Expression Generator & Explainer
         * æ”¯æ´ Quartz Scheduler çš„å®Œæ•´ Cron èªæ³•
         */
        class QuartzCronGenerator {
            constructor() {
                this.initializeElements();
                this.generateCron();
            }

            initializeElements() {
                this.elements = {
                    seconds: document.getElementById('seconds'),
                    minutes: document.getElementById('minutes'),
                    hours: document.getElementById('hours'),
                    dayOfMonth: document.getElementById('dayOfMonth'),
                    month: document.getElementById('month'),
                    dayOfWeek: document.getElementById('dayOfWeek'),
                    year: document.getElementById('year'),
                    cronExpression: document.getElementById('cronExpression'),
                    manualCronInput: document.getElementById('manualCronInput'),
                    cronExplanation: document.getElementById('cronExplanation'),
                    nextRuns: document.getElementById('nextRuns'),
                    errorMessage: document.getElementById('errorMessage'),
                    displaySeconds: document.getElementById('displaySeconds'),
                    displayMinutes: document.getElementById('displayMinutes'),
                    displayHours: document.getElementById('displayHours'),
                    displayDayOfMonth: document.getElementById('displayDayOfMonth'),
                    displayMonth: document.getElementById('displayMonth'),
                    displayDayOfWeek: document.getElementById('displayDayOfWeek'),
                    displayYear: document.getElementById('displayYear')
                };
            }

            generateCron() {
                try {
                    // ç²å–æ‰€æœ‰æ¬„ä½å€¼
                    let dayOfMonth = this.elements.dayOfMonth.value || '*';
                    let dayOfWeek = this.elements.dayOfWeek.value || '?';
                    
                    // è‡ªå‹•ä¿®æ­£æ—¥æœŸå’Œæ˜ŸæœŸçš„äº’æ–¥é—œä¿‚
                    if (dayOfMonth !== '*' && dayOfMonth !== '?' && dayOfWeek !== '?' && dayOfWeek !== '*') {
                        // å¦‚æœå…©è€…éƒ½æœ‰å…·é«”å€¼ï¼Œå„ªå…ˆä¿ç•™æ—¥æœŸï¼Œæ˜ŸæœŸæ”¹ç‚º ?
                        dayOfWeek = '?';
                        this.elements.dayOfWeek.value = '?';
                    } else if (dayOfMonth === '?' && dayOfWeek === '?') {
                        // å¦‚æœå…©è€…éƒ½æ˜¯ ?ï¼Œå°‡æ—¥æœŸæ”¹ç‚º *
                        dayOfMonth = '*';
                        this.elements.dayOfMonth.value = '*';
                    } else if (dayOfWeek !== '?' && dayOfWeek !== '*' && dayOfMonth !== '?') {
                        // å¦‚æœæŒ‡å®šäº†æ˜ŸæœŸä¸”æ—¥æœŸä¸æ˜¯ ?ï¼Œå°‡æ—¥æœŸæ”¹ç‚º ?
                        dayOfMonth = '?';
                        this.elements.dayOfMonth.value = '?';
                    }

                    const parts = [
                        this.elements.seconds.value || '0',
                        this.elements.minutes.value || '0',
                        this.elements.hours.value || '*',
                        dayOfMonth,
                        this.elements.month.value || '*',
                        dayOfWeek
                    ];

                    if (this.elements.year.value) {
                        parts.push(this.elements.year.value);
                    }

                    const cronExpression = parts.join(' ');
                    this.updateExpression(cronExpression);
                    this.updateDisplay();
                    this.explainCron(cronExpression);
                    this.calculateNextRuns(cronExpression);
                    this.validateExpression(cronExpression);
                } catch (error) {
                    this.showError('ç”Ÿæˆè¡¨é”å¼æ™‚ç™¼ç”ŸéŒ¯èª¤: ' + error.message);
                }
            }

            updateExpression(expression) {
                this.elements.cronExpression.textContent = expression;
                this.elements.manualCronInput.value = expression;
            }

            updateDisplay() {
                this.elements.displaySeconds.textContent = this.elements.seconds.value || '0';
                this.elements.displayMinutes.textContent = this.elements.minutes.value || '0';
                this.elements.displayHours.textContent = this.elements.hours.value || '*';
                this.elements.displayDayOfMonth.textContent = this.elements.dayOfMonth.value || '*';
                this.elements.displayMonth.textContent = this.elements.month.value || '*';
                this.elements.displayDayOfWeek.textContent = this.elements.dayOfWeek.value || '?';
                this.elements.displayYear.textContent = this.elements.year.value || '-';
            }

            parseCronExpression() {
                const cronExpression = this.elements.manualCronInput.value.trim();
                if (!cronExpression) {
                    showToast.warning('è«‹è¼¸å…¥ Cron è¡¨é”å¼');
                    return;
                }

                try {
                    const parts = cronExpression.split(/\s+/);
                    if (parts.length < 6 || parts.length > 7) {
                        throw new Error('Cron è¡¨é”å¼å¿…é ˆåŒ…å« 6-7 å€‹æ¬„ä½');
                    }

                    // æ›´æ–°è¼¸å…¥æ¬„ä½
                    this.elements.seconds.value = parts[0] || '0';
                    this.elements.minutes.value = parts[1] || '0';
                    this.elements.hours.value = parts[2] || '*';
                    this.elements.dayOfMonth.value = parts[3] || '*';
                    this.elements.month.value = parts[4] || '*';
                    this.elements.dayOfWeek.value = parts[5] || '?';
                    this.elements.year.value = parts[6] || '';

                    this.updateExpression(cronExpression);
                    this.updateDisplay();
                    this.explainCron(cronExpression);
                    this.calculateNextRuns(cronExpression);
                    this.validateExpression(cronExpression);

                    showToast.success('Cron è¡¨é”å¼è§£ææˆåŠŸ');
                } catch (error) {
                    this.showError('è§£æè¡¨é”å¼å¤±æ•—: ' + error.message);
                }
            }

            explainCron(cronExpression) {
                try {
                    const parts = cronExpression.split(/\s+/);
                    const [sec, min, hour, dayMonth, month, dayWeek, year] = parts;

                    let explanation = 'æ­¤ Cron è¡¨é”å¼è¡¨ç¤ºï¼š';
                    
                    // é »ç‡åˆ†æ
                    if (sec === '*' && min === '*' && hour === '*') {
                        explanation = 'æ¯ç§’åŸ·è¡Œ';
                    } else if (min === '*' && hour === '*') {
                        explanation = `æ¯åˆ†é˜çš„ç¬¬ ${sec} ç§’åŸ·è¡Œ`;
                    } else if (hour === '*') {
                        if (min.includes('/')) {
                            const interval = min.split('/')[1];
                            explanation = `æ¯ ${interval} åˆ†é˜åŸ·è¡Œ`;
                        } else if (min === '*') {
                            explanation = `æ¯å°æ™‚çš„ç¬¬ ${sec} ç§’åŸ·è¡Œ`;
                        } else {
                            explanation = `æ¯å°æ™‚çš„ç¬¬ ${min} åˆ† ${sec} ç§’åŸ·è¡Œ`;
                        }
                    } else {
                        // å…·é«”æ™‚é–“
                        const timeStr = this.formatTime(hour, min, sec);
                        
                        if (dayMonth === '*' && dayWeek === '?') {
                            explanation = `æ¯æ—¥ ${timeStr} åŸ·è¡Œ`;
                        } else if (dayWeek !== '?' && dayWeek !== '*') {
                            const weekStr = this.formatDayOfWeek(dayWeek);
                            explanation = `æ¯é€±${weekStr} ${timeStr} åŸ·è¡Œ`;
                        } else if (dayMonth !== '*') {
                            explanation = `æ¯æœˆ ${dayMonth} æ—¥ ${timeStr} åŸ·è¡Œ`;
                        }
                    }

                    // æœˆä»½é™åˆ¶
                    if (month !== '*') {
                        explanation += `ï¼Œåƒ…åœ¨ ${this.formatMonth(month)} åŸ·è¡Œ`;
                    }

                    // å¹´ä»½é™åˆ¶
                    if (year && year !== '*') {
                        explanation += `ï¼Œåƒ…åœ¨ ${year} å¹´åŸ·è¡Œ`;
                    }

                    this.elements.cronExplanation.textContent = explanation;
                } catch (error) {
                    this.elements.cronExplanation.textContent = 'ç„¡æ³•è§£ææ­¤è¡¨é”å¼';
                }
            }

            formatTime(hour, min, sec) {
                const h = hour === '*' ? 'æ¯å°æ™‚' : this.padZero(hour);
                const m = min === '*' ? 'æ¯åˆ†é˜' : this.padZero(min);
                const s = sec === '0' ? '' : `:${this.padZero(sec)}`;
                
                if (hour === '*') return 'æ¯å°æ™‚';
                if (min === '*') return `${h}é»æ¯åˆ†é˜`;
                
                return `${h}:${m}${s}`;
            }

            formatDayOfWeek(dayWeek) {
                const days = {
                    '1': 'æ—¥', '2': 'ä¸€', '3': 'äºŒ', '4': 'ä¸‰', '5': 'å››', '6': 'äº”', '7': 'å…­',
                    'SUN': 'æ—¥', 'MON': 'ä¸€', 'TUE': 'äºŒ', 'WED': 'ä¸‰', 'THU': 'å››', 'FRI': 'äº”', 'SAT': 'å…­'
                };
                
                if (dayWeek.includes(',')) {
                    return dayWeek.split(',').map(d => days[d.trim()] || d).join('ã€');
                }
                
                return days[dayWeek] || dayWeek;
            }

            formatMonth(month) {
                const months = {
                    '1': '1æœˆ', '2': '2æœˆ', '3': '3æœˆ', '4': '4æœˆ', '5': '5æœˆ', '6': '6æœˆ',
                    '7': '7æœˆ', '8': '8æœˆ', '9': '9æœˆ', '10': '10æœˆ', '11': '11æœˆ', '12': '12æœˆ',
                    'JAN': '1æœˆ', 'FEB': '2æœˆ', 'MAR': '3æœˆ', 'APR': '4æœˆ', 'MAY': '5æœˆ', 'JUN': '6æœˆ',
                    'JUL': '7æœˆ', 'AUG': '8æœˆ', 'SEP': '9æœˆ', 'OCT': '10æœˆ', 'NOV': '11æœˆ', 'DEC': '12æœˆ'
                };
                
                if (month.includes(',')) {
                    return month.split(',').map(m => months[m.trim()] || m).join('ã€');
                }
                
                return months[month] || month;
            }

            calculateNextRuns(cronExpression) {
                try {
                    const nextRuns = this.getNextExecutionTimes(cronExpression, 10);
                    this.displayNextRuns(nextRuns);
                } catch (error) {
                    this.elements.nextRuns.innerHTML = '<div class="next-run-item"><span class="run-time">ç„¡æ³•è¨ˆç®—åŸ·è¡Œæ™‚é–“</span></div>';
                }
            }

            getNextExecutionTimes(cronExpression, count = 10) {
                const parts = cronExpression.split(/\s+/);
                const [sec, min, hour, dayMonth, month, dayWeek, year] = parts;
                
                const now = new Date();
                const results = [];
                let current = new Date(now.getTime() + 1000); // å¾ä¸‹ä¸€ç§’é–‹å§‹
                let attempts = 0;
                const maxAttempts = 100000; // é˜²æ­¢ç„¡é™å¾ªç’°

                while (results.length < count && attempts < maxAttempts) {
                    attempts++;
                    
                    if (this.matchesCronExpression(current, parts)) {
                        results.push(new Date(current));
                    }
                    
                    // ç§»åˆ°ä¸‹ä¸€åˆ†é˜ï¼ˆç°¡åŒ–è™•ç†ï¼‰
                    current.setSeconds(0);
                    current.setMinutes(current.getMinutes() + 1);
                }

                return results;
            }

            matchesCronExpression(date, parts) {
                const [sec, min, hour, dayMonth, month, dayWeek, year] = parts;
                
                // ç°¡åŒ–çš„åŒ¹é…é‚è¼¯ï¼ˆå¯¦éš›æ‡‰è©²æ›´è¤‡é›œï¼‰
                return (
                    this.matchField(date.getSeconds(), sec, 0, 59) &&
                    this.matchField(date.getMinutes(), min, 0, 59) &&
                    this.matchField(date.getHours(), hour, 0, 23) &&
                    this.matchDayField(date, dayMonth, dayWeek) &&
                    this.matchField(date.getMonth() + 1, month, 1, 12) &&
                    this.matchField(date.getFullYear(), year || '*', 1970, 2099)
                );
            }

            matchField(value, pattern, min, max) {
                if (pattern === '*') return true;
                if (pattern === '?') return true;
                
                // è™•ç†æ˜ŸæœŸçš„å­—ç¬¦ä¸²å€¼
                if (min === 1 && max === 7) { // é€™æ˜¯æ˜ŸæœŸæ¬„ä½
                    pattern = this.convertDayOfWeekToNumber(pattern);
                }
                
                // ç°¡å–®çš„æ•¸å­—åŒ¹é…
                if (!isNaN(pattern)) {
                    return value === parseInt(pattern);
                }
                
                // ç¯„åœåŒ¹é… (ä¾‹å¦‚: 10-15)
                if (pattern.includes('-')) {
                    const [start, end] = pattern.split('-').map(x => {
                        const converted = min === 1 && max === 7 ? this.convertDayOfWeekToNumber(x) : x;
                        return parseInt(converted);
                    });
                    return value >= start && value <= end;
                }
                
                // åˆ—è¡¨åŒ¹é… (ä¾‹å¦‚: 1,3,5 æˆ– MON,WED,FRI)
                if (pattern.includes(',')) {
                    const values = pattern.split(',').map(x => {
                        const trimmed = x.trim();
                        const converted = min === 1 && max === 7 ? this.convertDayOfWeekToNumber(trimmed) : trimmed;
                        return parseInt(converted);
                    });
                    return values.includes(value);
                }
                
                // é–“éš”åŒ¹é… (ä¾‹å¦‚: */5)
                if (pattern.includes('/')) {
                    const [base, interval] = pattern.split('/');
                    const baseValue = base === '*' ? min : parseInt(base);
                    return (value - baseValue) % parseInt(interval) === 0;
                }
                
                return false;
            }

            convertDayOfWeekToNumber(dayStr) {
                const dayMap = {
                    'SUN': '1', 'MON': '2', 'TUE': '3', 'WED': '4', 
                    'THU': '5', 'FRI': '6', 'SAT': '7'
                };
                return dayMap[dayStr.toUpperCase()] || dayStr;
            }

            matchDayField(date, dayMonth, dayWeek) {
                // å¦‚æœä½¿ç”¨ ?, å‰‡è©²æ¬„ä½è¢«å¿½ç•¥
                if (dayMonth === '?' && dayWeek === '?') return true;
                if (dayMonth === '?' && dayWeek !== '?') {
                    return this.matchField(date.getDay() === 0 ? 7 : date.getDay(), dayWeek, 1, 7);
                }
                if (dayWeek === '?' && dayMonth !== '?') {
                    return this.matchField(date.getDate(), dayMonth, 1, 31);
                }
                
                // å…©è€…éƒ½æŒ‡å®šæ™‚ï¼Œä»»ä¸€åŒ¹é…å³å¯
                return this.matchField(date.getDate(), dayMonth, 1, 31) || 
                       this.matchField(date.getDay() === 0 ? 7 : date.getDay(), dayWeek, 1, 7);
            }

            displayNextRuns(runs) {
                if (runs.length === 0) {
                    this.elements.nextRuns.innerHTML = '<div class="next-run-item"><span class="run-time">æœªæ‰¾åˆ°ç¬¦åˆçš„åŸ·è¡Œæ™‚é–“</span></div>';
                    return;
                }

                const html = runs.map(run => {
                    const timeStr = run.toLocaleString('zh-TW', {
                        year: 'numeric',
                        month: '2-digit',
                        day: '2-digit',
                        hour: '2-digit',
                        minute: '2-digit',
                        second: '2-digit'
                    });
                    
                    const relative = this.getRelativeTime(run);
                    
                    return `
                        <div class="next-run-item">
                            <span class="run-time">${timeStr}</span>
                            <span class="run-relative">${relative}</span>
                        </div>
                    `;
                }).join('');

                this.elements.nextRuns.innerHTML = html;
            }

            getRelativeTime(date) {
                const now = new Date();
                const diff = date.getTime() - now.getTime();
                
                if (diff < 0) return 'å·²éæœŸ';
                
                const seconds = Math.floor(diff / 1000);
                const minutes = Math.floor(seconds / 60);
                const hours = Math.floor(minutes / 60);
                const days = Math.floor(hours / 24);
                
                if (days > 0) return `${days} å¤©å¾Œ`;
                if (hours > 0) return `${hours} å°æ™‚å¾Œ`;
                if (minutes > 0) return `${minutes} åˆ†é˜å¾Œ`;
                return `${seconds} ç§’å¾Œ`;
            }

            validateExpression(cronExpression) {
                try {
                    const parts = cronExpression.split(/\s+/);
                    
                    if (parts.length < 6 || parts.length > 7) {
                        throw new Error('Cron è¡¨é”å¼å¿…é ˆåŒ…å« 6-7 å€‹æ¬„ä½');
                    }

                    // æª¢æŸ¥æ—¥æœŸå’Œæ˜ŸæœŸçš„äº’æ–¥æ€§ (Quartz å°ˆç”¨è¦å‰‡)
                    const dayMonth = parts[3];
                    const dayWeek = parts[5];
                    
                    // åœ¨ Quartz ä¸­ï¼ŒdayOfMonth å’Œ dayOfWeek å…¶ä¸­ä¸€å€‹å¿…é ˆæ˜¯ ?
                    if (dayMonth === '?' && dayWeek === '?') {
                        throw new Error('æ—¥æœŸå’Œæ˜ŸæœŸæ¬„ä½ä¸èƒ½åŒæ™‚ä½¿ç”¨ ?ï¼Œå…¶ä¸­ä¸€å€‹å¿…é ˆæŒ‡å®šå€¼');
                    }
                    
                    // æª¢æŸ¥æ˜¯å¦éƒ½ä¸æ˜¯ ?
                    if (dayMonth !== '?' && dayWeek !== '?') {
                        throw new Error('åœ¨ Quartz ä¸­ï¼Œæ—¥æœŸå’Œæ˜ŸæœŸæ¬„ä½å…¶ä¸­ä¸€å€‹å¿…é ˆä½¿ç”¨ ?ï¼ˆç•¶æŒ‡å®šæ˜ŸæœŸæ™‚æ—¥æœŸç”¨?ï¼Œç•¶æŒ‡å®šæ—¥æœŸæ™‚æ˜ŸæœŸç”¨?ï¼‰');
                    }
                    
                    // é¡å¤–çš„æ ¼å¼é©—è­‰
                    this.validateFieldFormats(parts);

                    this.elements.cronExpression.className = 'cron-expression valid';
                    this.hideError();
                } catch (error) {
                    this.elements.cronExpression.className = 'cron-expression invalid';
                    this.showError(error.message);
                }
            }

            validateFieldFormats(parts) {
                const [sec, min, hour, dayMonth, month, dayWeek, year] = parts;
                
                // é©—è­‰æ•¸å­—ç¯„åœ
                this.validateRange(sec, 0, 59, 'ç§’');
                this.validateRange(min, 0, 59, 'åˆ†');
                this.validateRange(hour, 0, 23, 'æ™‚');
                
                if (dayMonth !== '?') {
                    this.validateRange(dayMonth, 1, 31, 'æ—¥');
                }
                
                this.validateRange(month, 1, 12, 'æœˆ');
                
                if (dayWeek !== '?') {
                    this.validateDayOfWeek(dayWeek);
                }
                
                if (year && year !== '*') {
                    this.validateRange(year, 1970, 2099, 'å¹´');
                }
            }

            validateRange(value, min, max, fieldName) {
                if (value === '*' || value === '?' || value.includes('/') || value.includes('-') || value.includes(',')) {
                    return; // ç‰¹æ®Šå­—ç¬¦æš«æ™‚è·³éè©³ç´°é©—è­‰
                }
                
                const num = parseInt(value);
                if (isNaN(num) || num < min || num > max) {
                    throw new Error(`${fieldName}æ¬„ä½å€¼ "${value}" è¶…å‡ºæœ‰æ•ˆç¯„åœ (${min}-${max})`);
                }
            }

            validateDayOfWeek(value) {
                if (value === '*' || value === '?' || value.includes('/') || value.includes('-') || value.includes(',')) {
                    return; // ç‰¹æ®Šå­—ç¬¦æš«æ™‚è·³éè©³ç´°é©—è­‰
                }
                
                const validDays = ['1', '2', '3', '4', '5', '6', '7', 'SUN', 'MON', 'TUE', 'WED', 'THU', 'FRI', 'SAT'];
                if (!validDays.includes(value.toUpperCase())) {
                    throw new Error(`æ˜ŸæœŸæ¬„ä½å€¼ "${value}" ç„¡æ•ˆï¼Œè«‹ä½¿ç”¨ 1-7 æˆ– SUN-SAT`);
                }
            }

            showError(message) {
                this.elements.errorMessage.textContent = message;
                this.elements.errorMessage.style.display = 'block';
            }

            hideError() {
                this.elements.errorMessage.style.display = 'none';
            }

            setPreset(cronExpression) {
                this.elements.manualCronInput.value = cronExpression;
                
                // è§£æè¡¨é”å¼ä½†ä¸é¡¯ç¤ºè§£ææˆåŠŸçš„ toast
                const parts = cronExpression.split(/\s+/);
                if (parts.length >= 6 && parts.length <= 7) {
                    // æ›´æ–°è¼¸å…¥æ¬„ä½
                    this.elements.seconds.value = parts[0] || '0';
                    this.elements.minutes.value = parts[1] || '0';
                    this.elements.hours.value = parts[2] || '*';
                    this.elements.dayOfMonth.value = parts[3] || '*';
                    this.elements.month.value = parts[4] || '*';
                    this.elements.dayOfWeek.value = parts[5] || '?';
                    this.elements.year.value = parts[6] || '';

                    this.updateExpression(cronExpression);
                    this.updateDisplay();
                    this.explainCron(cronExpression);
                    this.calculateNextRuns(cronExpression);
                    this.validateExpression(cronExpression);

                    // é¡¯ç¤ºé è¨­å¥—ç”¨æˆåŠŸçš„ toast
                    showToast.success('å·²å¥—ç”¨é è¨­è¡¨é”å¼è¨­å®š');
                } else {
                    showToast.error('é è¨­è¡¨é”å¼æ ¼å¼éŒ¯èª¤');
                }
            }

            reset() {
                this.elements.seconds.value = '0';
                this.elements.minutes.value = '0';
                this.elements.hours.value = '12';
                this.elements.dayOfMonth.value = '*';
                this.elements.month.value = '*';
                this.elements.dayOfWeek.value = '?';
                this.elements.year.value = '';
                this.generateCron();
                showToast.info('å·²é‡ç½®ç‚ºé è¨­è¨­å®š');
            }

            copyExpression() {
                const expression = this.elements.cronExpression.textContent;
                navigator.clipboard.writeText(expression).then(() => {
                    // æ·»åŠ è¤‡è£½æˆåŠŸçš„è¦–è¦ºç‰¹æ•ˆ
                    this.addCopySuccessEffect();
                    // è§¸ç™¼çˆ†ç±³èŠ±ç‰¹æ•ˆ
                    this.triggerPopcornEffect();
                    // é¡¯ç¤ºæˆåŠŸæç¤º
                    showToast.success('Cron è¡¨é”å¼å·²è¤‡è£½åˆ°å‰ªè²¼ç°¿ ğŸ¿');
                }).catch(() => {
                    showToast.error('è¤‡è£½å¤±æ•—ï¼Œè«‹æ‰‹å‹•é¸å–ä¸¦è¤‡è£½');
                });
            }

            addCopySuccessEffect() {
                // ç²å–è¤‡è£½æŒ‰éˆ•
                const copyBtn = document.querySelector('[onclick="copyCronExpression()"]');
                if (copyBtn) {
                    copyBtn.classList.add('copy-success-effect');
                    setTimeout(() => {
                        copyBtn.classList.remove('copy-success-effect');
                    }, 600);
                }
            }

            triggerPopcornEffect() {
                // å‰µå»ºçˆ†ç±³èŠ±å®¹å™¨
                let container = document.getElementById('popcorn-container');
                if (!container) {
                    container = document.createElement('div');
                    container.id = 'popcorn-container';
                    container.className = 'popcorn-container';
                    document.body.appendChild(container);
                }

                // çˆ†ç±³èŠ±è¡¨æƒ…ç¬¦è™Ÿæ•¸çµ„
                const popcornEmojis = ['ğŸ¿', 'ğŸŒ½', 'ğŸ¿', 'ğŸŒŸ', 'âœ¨', 'ğŸ¿', 'ğŸ’«', 'ğŸ¿'];
                
                // å‰µå»º20å€‹çˆ†ç±³èŠ±
                for (let i = 0; i < 20; i++) {
                    setTimeout(() => {
                        this.createPopcorn(container, popcornEmojis);
                    }, i * 100); // æ¯100mså‰µå»ºä¸€å€‹ï¼Œè£½é€ é€£çºŒæ•ˆæœ
                }

                // 3ç§’å¾Œæ¸…ç†å®¹å™¨
                setTimeout(() => {
                    if (container && container.parentNode) {
                        container.parentNode.removeChild(container);
                    }
                }, 5000);
            }

            createPopcorn(container, emojis) {
                const popcorn = document.createElement('div');
                popcorn.className = 'popcorn';
                
                // éš¨æ©Ÿé¸æ“‡è¡¨æƒ…ç¬¦è™Ÿ
                const emoji = emojis[Math.floor(Math.random() * emojis.length)];
                popcorn.textContent = emoji;
                
                // éš¨æ©Ÿä½ç½®ï¼ˆå¾é ‚éƒ¨é–‹å§‹ï¼‰
                const startX = Math.random() * window.innerWidth;
                popcorn.style.left = startX + 'px';
                popcorn.style.top = '-50px';
                
                // éš¨æ©Ÿå¤§å°
                const size = 20 + Math.random() * 20; // 20-40px
                popcorn.style.fontSize = size + 'px';
                
                // éš¨æ©Ÿå‹•ç•«æŒçºŒæ™‚é–“
                const duration = 2.5 + Math.random() * 2; // 2.5-4.5ç§’
                popcorn.style.animationDuration = duration + 's';
                
                // å‰µå»ºæ›´è‡ªç„¶çš„é£„ç§»è»Œè·¡
                const driftIntensity = 50 + Math.random() * 100; // 50-150pxçš„é£„ç§»å¹…åº¦
                const driftDirection = Math.random() > 0.5 ? 1 : -1; // éš¨æ©Ÿæ–¹å‘
                
                popcorn.style.setProperty('--drift-10', (driftIntensity * 0.2 * driftDirection) + 'px');
                popcorn.style.setProperty('--drift-30', (driftIntensity * 0.5 * driftDirection) + 'px');
                popcorn.style.setProperty('--drift-60', (driftIntensity * 0.8 * driftDirection) + 'px');
                popcorn.style.setProperty('--drift-100', (driftIntensity * driftDirection) + 'px');
                
                // æ·»åŠ éš¨æ©Ÿçš„åˆå§‹æ—‹è½‰
                const initialRotation = Math.random() * 360;
                popcorn.style.transform = `rotate(${initialRotation}deg)`;
                
                // æ·»åŠ åˆ°å®¹å™¨
                container.appendChild(popcorn);
                
                // å‹•ç•«çµæŸå¾Œç§»é™¤å…ƒç´ 
                setTimeout(() => {
                    if (popcorn && popcorn.parentNode) {
                        popcorn.parentNode.removeChild(popcorn);
                    }
                }, duration * 1000);
            }

            padZero(value) {
                return value.toString().padStart(2, '0');
            }
        }

        // åˆå§‹åŒ–
        let cronGenerator;
        document.addEventListener('DOMContentLoaded', function() {
            cronGenerator = new QuartzCronGenerator();
        });

        // å…¨åŸŸå‡½æ•¸
        function generateCron() {
            cronGenerator.generateCron();
        }

        function parseCronExpression() {
            cronGenerator.parseCronExpression();
        }

        function setPreset(expression) {
            cronGenerator.setPreset(expression);
        }

        function resetForm() {
            cronGenerator.reset();
        }

        function copyCronExpression() {
            cronGenerator.copyExpression();
        }

        function handleManualInput(event) {
            if (event.key === 'Enter') {
                parseCronExpression();
            }
        }

        // SEO çµæ§‹åŒ–æ•¸æ“š
        const structuredData = {
            "@context": "https://schema.org",
            "@type": "WebApplication",
            "name": "Cron Expression Generator & Explainer - Quartz",
            "description": "å°ˆæ¥­çš„ Quartz Cron è¡¨é”å¼ç”Ÿæˆå™¨èˆ‡è§£æå·¥å…·ï¼Œæ”¯æ´å¯è¦–åŒ–è¨­å®šã€å³æ™‚é è¦½åŸ·è¡Œæ™‚é–“ã€è‡ªå‹•ç”Ÿæˆå’Œè©³ç´°è§£é‡‹",
            "url": "https://sds-site.vercel.app/CronGenerator",
            "applicationCategory": "DeveloperApplication",
            "operatingSystem": "Any",
            "browserRequirements": "Requires JavaScript",
            "softwareVersion": "1.0",
            "offers": {
                "@type": "Offer",
                "price": "0",
                "priceCurrency": "TWD"
            },
            "creator": {
                "@type": "Organization",
                "name": "SDS Site"
            }
        };

        const script = document.createElement('script');
        script.type = 'application/ld+json';
        script.textContent = JSON.stringify(structuredData);
        document.head.appendChild(script);
    </script>

    <!-- çµ±ä¸€å°èˆªçµ„ä»¶ -->
    <script src="components/navigation.js"></script>
</body>
</html>
